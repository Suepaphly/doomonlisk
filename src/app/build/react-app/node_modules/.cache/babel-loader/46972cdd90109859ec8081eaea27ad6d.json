{"ast":null,"code":"var util = require('util');\n\nvar AbstractLevelDOWN = require('abstract-leveldown').AbstractLevelDOWN;\n\nvar binding = require('./binding');\n\nvar ChainedBatch = require('./chained-batch');\n\nvar Iterator = require('./iterator');\n\nfunction LevelDOWN(location) {\n  if (!(this instanceof LevelDOWN)) {\n    return new LevelDOWN(location);\n  }\n\n  if (typeof location !== 'string') {\n    throw new Error('constructor requires a location string argument');\n  }\n\n  AbstractLevelDOWN.call(this);\n  this.location = location;\n  this.context = binding.db_init();\n}\n\nutil.inherits(LevelDOWN, AbstractLevelDOWN);\n\nLevelDOWN.prototype._open = function (options, callback) {\n  binding.db_open(this.context, this.location, options, callback);\n};\n\nLevelDOWN.prototype._close = function (callback) {\n  binding.db_close(this.context, callback);\n};\n\nLevelDOWN.prototype._serializeKey = function (key) {\n  return Buffer.isBuffer(key) ? key : String(key);\n};\n\nLevelDOWN.prototype._serializeValue = function (value) {\n  return Buffer.isBuffer(value) ? value : String(value);\n};\n\nLevelDOWN.prototype._put = function (key, value, options, callback) {\n  binding.db_put(this.context, key, value, options, callback);\n};\n\nLevelDOWN.prototype._get = function (key, options, callback) {\n  binding.db_get(this.context, key, options, callback);\n};\n\nLevelDOWN.prototype._del = function (key, options, callback) {\n  binding.db_del(this.context, key, options, callback);\n};\n\nLevelDOWN.prototype._chainedBatch = function () {\n  return new ChainedBatch(this);\n};\n\nLevelDOWN.prototype._batch = function (operations, options, callback) {\n  binding.batch_do(this.context, operations, options, callback);\n};\n\nLevelDOWN.prototype.approximateSize = function (start, end, callback) {\n  if (start == null || end == null || typeof start === 'function' || typeof end === 'function') {\n    throw new Error('approximateSize() requires valid `start` and `end` arguments');\n  }\n\n  if (typeof callback !== 'function') {\n    throw new Error('approximateSize() requires a callback argument');\n  }\n\n  start = this._serializeKey(start);\n  end = this._serializeKey(end);\n  binding.db_approximate_size(this.context, start, end, callback);\n};\n\nLevelDOWN.prototype.compactRange = function (start, end, callback) {\n  if (start == null || end == null || typeof start === 'function' || typeof end === 'function') {\n    throw new Error('compactRange() requires valid `start` and `end` arguments');\n  }\n\n  if (typeof callback !== 'function') {\n    throw new Error('compactRange() requires a callback argument');\n  }\n\n  start = this._serializeKey(start);\n  end = this._serializeKey(end);\n  binding.db_compact_range(this.context, start, end, callback);\n};\n\nLevelDOWN.prototype.getProperty = function (property) {\n  if (typeof property !== 'string') {\n    throw new Error('getProperty() requires a valid `property` argument');\n  }\n\n  return binding.db_get_property(this.context, property);\n};\n\nLevelDOWN.prototype._iterator = function (options) {\n  if (this.status !== 'open') {\n    // Prevent segfault\n    throw new Error('cannot call iterator() before open()');\n  }\n\n  return new Iterator(this, options);\n};\n\nLevelDOWN.destroy = function (location, callback) {\n  if (arguments.length < 2) {\n    throw new Error('destroy() requires `location` and `callback` arguments');\n  }\n\n  if (typeof location !== 'string') {\n    throw new Error('destroy() requires a location string argument');\n  }\n\n  if (typeof callback !== 'function') {\n    throw new Error('destroy() requires a callback function argument');\n  }\n\n  binding.destroy_db(location, callback);\n};\n\nLevelDOWN.repair = function (location, callback) {\n  if (arguments.length < 2) {\n    throw new Error('repair() requires `location` and `callback` arguments');\n  }\n\n  if (typeof location !== 'string') {\n    throw new Error('repair() requires a location string argument');\n  }\n\n  if (typeof callback !== 'function') {\n    throw new Error('repair() requires a callback function argument');\n  }\n\n  binding.repair_db(location, callback);\n};\n\nmodule.exports = LevelDOWN.default = LevelDOWN;","map":{"version":3,"sources":["/home/lisk/doomonlisk/node_modules/rocksdb/leveldown.js"],"names":["util","require","AbstractLevelDOWN","binding","ChainedBatch","Iterator","LevelDOWN","location","Error","call","context","db_init","inherits","prototype","_open","options","callback","db_open","_close","db_close","_serializeKey","key","Buffer","isBuffer","String","_serializeValue","value","_put","db_put","_get","db_get","_del","db_del","_chainedBatch","_batch","operations","batch_do","approximateSize","start","end","db_approximate_size","compactRange","db_compact_range","getProperty","property","db_get_property","_iterator","status","destroy","arguments","length","destroy_db","repair","repair_db","module","exports","default"],"mappings":"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","sourcesContent":["const util = require('util')\nconst AbstractLevelDOWN = require('abstract-leveldown').AbstractLevelDOWN\nconst binding = require('./binding')\nconst ChainedBatch = require('./chained-batch')\nconst Iterator = require('./iterator')\n\nfunction LevelDOWN (location) {\n  if (!(this instanceof LevelDOWN)) {\n    return new LevelDOWN(location)\n  }\n\n  if (typeof location !== 'string') {\n    throw new Error('constructor requires a location string argument')\n  }\n\n  AbstractLevelDOWN.call(this)\n\n  this.location = location\n  this.context = binding.db_init()\n}\n\nutil.inherits(LevelDOWN, AbstractLevelDOWN)\n\nLevelDOWN.prototype._open = function (options, callback) {\n  binding.db_open(this.context, this.location, options, callback)\n}\n\nLevelDOWN.prototype._close = function (callback) {\n  binding.db_close(this.context, callback)\n}\n\nLevelDOWN.prototype._serializeKey = function (key) {\n  return Buffer.isBuffer(key) ? key : String(key)\n}\n\nLevelDOWN.prototype._serializeValue = function (value) {\n  return Buffer.isBuffer(value) ? value : String(value)\n}\n\nLevelDOWN.prototype._put = function (key, value, options, callback) {\n  binding.db_put(this.context, key, value, options, callback)\n}\n\nLevelDOWN.prototype._get = function (key, options, callback) {\n  binding.db_get(this.context, key, options, callback)\n}\n\nLevelDOWN.prototype._del = function (key, options, callback) {\n  binding.db_del(this.context, key, options, callback)\n}\n\nLevelDOWN.prototype._chainedBatch = function () {\n  return new ChainedBatch(this)\n}\n\nLevelDOWN.prototype._batch = function (operations, options, callback) {\n  binding.batch_do(this.context, operations, options, callback)\n}\n\nLevelDOWN.prototype.approximateSize = function (start, end, callback) {\n  if (start == null ||\n      end == null ||\n      typeof start === 'function' ||\n      typeof end === 'function') {\n    throw new Error('approximateSize() requires valid `start` and `end` arguments')\n  }\n\n  if (typeof callback !== 'function') {\n    throw new Error('approximateSize() requires a callback argument')\n  }\n\n  start = this._serializeKey(start)\n  end = this._serializeKey(end)\n\n  binding.db_approximate_size(this.context, start, end, callback)\n}\n\nLevelDOWN.prototype.compactRange = function (start, end, callback) {\n  if (start == null ||\n      end == null ||\n      typeof start === 'function' ||\n      typeof end === 'function') {\n    throw new Error('compactRange() requires valid `start` and `end` arguments')\n  }\n\n  if (typeof callback !== 'function') {\n    throw new Error('compactRange() requires a callback argument')\n  }\n\n  start = this._serializeKey(start)\n  end = this._serializeKey(end)\n\n  binding.db_compact_range(this.context, start, end, callback)\n}\n\nLevelDOWN.prototype.getProperty = function (property) {\n  if (typeof property !== 'string') {\n    throw new Error('getProperty() requires a valid `property` argument')\n  }\n\n  return binding.db_get_property(this.context, property)\n}\n\nLevelDOWN.prototype._iterator = function (options) {\n  if (this.status !== 'open') {\n    // Prevent segfault\n    throw new Error('cannot call iterator() before open()')\n  }\n\n  return new Iterator(this, options)\n}\n\nLevelDOWN.destroy = function (location, callback) {\n  if (arguments.length < 2) {\n    throw new Error('destroy() requires `location` and `callback` arguments')\n  }\n  if (typeof location !== 'string') {\n    throw new Error('destroy() requires a location string argument')\n  }\n  if (typeof callback !== 'function') {\n    throw new Error('destroy() requires a callback function argument')\n  }\n\n  binding.destroy_db(location, callback)\n}\n\nLevelDOWN.repair = function (location, callback) {\n  if (arguments.length < 2) {\n    throw new Error('repair() requires `location` and `callback` arguments')\n  }\n  if (typeof location !== 'string') {\n    throw new Error('repair() requires a location string argument')\n  }\n  if (typeof callback !== 'function') {\n    throw new Error('repair() requires a callback function argument')\n  }\n\n  binding.repair_db(location, callback)\n}\n\nmodule.exports = LevelDOWN.default = LevelDOWN\n"]},"metadata":{},"sourceType":"script"}