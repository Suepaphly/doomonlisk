{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/home/lisk/doomonlisk/src/app/build/react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/home/lisk/doomonlisk/src/app/build/react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Slots = void 0;\nvar SEC_IN_MS = 1000;\n\nvar Slots = /*#__PURE__*/function () {\n  function Slots(_ref) {\n    var genesisBlockTimestamp = _ref.genesisBlockTimestamp,\n        interval = _ref.interval;\n\n    _classCallCheck(this, Slots);\n\n    this._genesisTime = genesisBlockTimestamp;\n    this._interval = interval;\n  }\n\n  _createClass(Slots, [{\n    key: \"timeSinceGenesis\",\n    value: function timeSinceGenesis() {\n      return Math.floor((Date.now() - this._genesisTime * SEC_IN_MS) / SEC_IN_MS);\n    }\n  }, {\n    key: \"blockTime\",\n    value: function blockTime() {\n      return this._interval;\n    }\n  }, {\n    key: \"getSlotNumber\",\n    value: function getSlotNumber(timeStamp) {\n      var time = timeStamp !== null && timeStamp !== void 0 ? timeStamp : Math.floor(Date.now() / SEC_IN_MS);\n      var elapsedTime = time - this._genesisTime;\n      return Math.floor(elapsedTime / this._interval);\n    }\n  }, {\n    key: \"getSlotTime\",\n    value: function getSlotTime(slot) {\n      var slotGenesisTimeOffset = slot * this._interval;\n      return this._genesisTime + slotGenesisTimeOffset;\n    }\n  }, {\n    key: \"getNextSlot\",\n    value: function getNextSlot() {\n      var slot = this.getSlotNumber();\n      return slot + 1;\n    }\n  }, {\n    key: \"isWithinTimeslot\",\n    value: function isWithinTimeslot(slot, time) {\n      return this.getSlotNumber(time) === slot;\n    }\n  }]);\n\n  return Slots;\n}();\n\nexports.Slots = Slots;","map":{"version":3,"sources":["../src/slots.ts"],"names":[],"mappings":";;;;;;;;;;AAmBA,IAAM,SAAS,GAAG,IAAlB;;IAEa,K;AAIZ,uBAAkE;AAAA,QAA7C,qBAA6C,QAA7C,qBAA6C;AAAA,QAAtB,QAAsB,QAAtB,QAAsB;;AAAA;;AACjE,SAAK,YAAL,GAAoB,qBAApB;AACA,SAAK,SAAL,GAAiB,QAAjB;AACA;;;;WAEM,4BAAgB;AACtB,aAAO,IAAI,CAAC,KAAL,CAAW,CAAC,IAAI,CAAC,GAAL,KAAa,KAAK,YAAL,GAAoB,SAAlC,IAA+C,SAA1D,CAAP;AACA;;;WAEM,qBAAS;AACf,aAAO,KAAK,SAAZ;AACA;;;WAEM,uBAAc,SAAd,EAAgC;AACtC,UAAM,IAAI,GAAG,SAAS,KAAA,IAAT,IAAA,SAAS,KAAA,KAAA,CAAT,GAAA,SAAA,GAAa,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,GAAL,KAAa,SAAxB,CAA1B;AACA,UAAM,WAAW,GAAG,IAAI,GAAG,KAAK,YAAhC;AAEA,aAAO,IAAI,CAAC,KAAL,CAAW,WAAW,GAAG,KAAK,SAA9B,CAAP;AACA;;;WAEM,qBAAY,IAAZ,EAAwB;AAC9B,UAAM,qBAAqB,GAAG,IAAI,GAAG,KAAK,SAA1C;AAEA,aAAO,KAAK,YAAL,GAAoB,qBAA3B;AACA;;;WAEM,uBAAW;AACjB,UAAM,IAAI,GAAG,KAAK,aAAL,EAAb;AAEA,aAAO,IAAI,GAAG,CAAd;AACA;;;WAEM,0BAAiB,IAAjB,EAA+B,IAA/B,EAA4C;AAClD,aAAO,KAAK,aAAL,CAAmB,IAAnB,MAA6B,IAApC;AACA;;;;;;AAtCF,OAAA,CAAA,KAAA,GAAA,KAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Slots = void 0;\nconst SEC_IN_MS = 1000;\nclass Slots {\n    constructor({ genesisBlockTimestamp, interval }) {\n        this._genesisTime = genesisBlockTimestamp;\n        this._interval = interval;\n    }\n    timeSinceGenesis() {\n        return Math.floor((Date.now() - this._genesisTime * SEC_IN_MS) / SEC_IN_MS);\n    }\n    blockTime() {\n        return this._interval;\n    }\n    getSlotNumber(timeStamp) {\n        const time = timeStamp !== null && timeStamp !== void 0 ? timeStamp : Math.floor(Date.now() / SEC_IN_MS);\n        const elapsedTime = time - this._genesisTime;\n        return Math.floor(elapsedTime / this._interval);\n    }\n    getSlotTime(slot) {\n        const slotGenesisTimeOffset = slot * this._interval;\n        return this._genesisTime + slotGenesisTimeOffset;\n    }\n    getNextSlot() {\n        const slot = this.getSlotNumber();\n        return slot + 1;\n    }\n    isWithinTimeslot(slot, time) {\n        return this.getSlotNumber(time) === slot;\n    }\n}\nexports.Slots = Slots;\n//# sourceMappingURL=slots.js.map"]},"metadata":{},"sourceType":"script"}