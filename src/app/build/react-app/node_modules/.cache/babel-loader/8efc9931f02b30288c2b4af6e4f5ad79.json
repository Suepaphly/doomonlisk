{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createGenesisBlock = void 0;\n\nvar lisk_genesis_1 = require(\"@liskhq/lisk-genesis\");\n\nvar utils_1 = require(\"./utils\");\n\nvar accounts_1 = require(\"./fixtures/accounts\");\n\nvar createGenesisBlock = function createGenesisBlock(params) {\n  var _a, _b, _c, _d, _e, _f;\n\n  var accounts = (_a = params.accounts) !== null && _a !== void 0 ? _a : accounts_1.defaultAccounts();\n  var initDelegates = (_b = params.initDelegates) !== null && _b !== void 0 ? _b : accounts_1.defaultAccounts().map(function (delegate) {\n    return delegate.address;\n  });\n  var accountAssetSchemas = utils_1.getAccountSchemaFromModules(params.modules, params.genesisConfig);\n  var initRounds = (_c = params.initRounds) !== null && _c !== void 0 ? _c : 3;\n  var height = (_d = params.height) !== null && _d !== void 0 ? _d : 0;\n  var today = new Date();\n  var yesterday = new Date(today.getTime() - 1000 * 60 * 60 * 24);\n  var defaultTimestamp = Math.floor(yesterday.getTime() / 1000);\n  var timestamp = (_e = params.timestamp) !== null && _e !== void 0 ? _e : defaultTimestamp;\n  var previousBlockID = (_f = params.previousBlockID) !== null && _f !== void 0 ? _f : Buffer.alloc(0);\n  var genesisBlock = lisk_genesis_1.createGenesisBlock({\n    accounts: accounts,\n    initDelegates: initDelegates,\n    accountAssetSchemas: accountAssetSchemas,\n    initRounds: initRounds,\n    height: height,\n    timestamp: timestamp,\n    previousBlockID: previousBlockID\n  });\n  var genesisBlockJSON = lisk_genesis_1.getGenesisBlockJSON({\n    genesisBlock: genesisBlock,\n    accountAssetSchemas: accountAssetSchemas\n  });\n  return {\n    genesisBlock: genesisBlock,\n    genesisBlockJSON: genesisBlockJSON\n  };\n};\n\nexports.createGenesisBlock = createGenesisBlock;","map":{"version":3,"sources":["../../src/testing/create_genesis_block.ts"],"names":[],"mappings":";;;;;;;AAgBA,IAAA,cAAA,GAAA,OAAA,CAAA,sBAAA,CAAA;;AAGA,IAAA,OAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AAEA,IAAA,UAAA,GAAA,OAAA,CAAA,qBAAA,CAAA;;AAaO,IAAM,kBAAkB,GAAG,SAArB,kBAAqB,CACjC,MADiC,EAEgD;;;AACjF,MAAM,QAAQ,GAAG,CAAA,EAAA,GAAA,MAAM,CAAC,QAAP,MAAe,IAAf,IAAe,EAAA,KAAA,KAAA,CAAf,GAAe,EAAf,GAAmB,UAAA,CAAA,eAAA,EAApC;AACA,MAAM,aAAa,GAClB,CAAA,EAAA,GAAA,MAAM,CAAC,aAAP,MAAoB,IAApB,IAAoB,EAAA,KAAA,KAAA,CAApB,GAAoB,EAApB,GAAwB,UAAA,CAAA,eAAA,GAAkB,GAAlB,CAAsB,UAAA,QAAQ;AAAA,WAAI,QAAQ,CAAC,OAAb;AAAA,GAA9B,CADzB;AAEA,MAAM,mBAAmB,GAAG,OAAA,CAAA,2BAAA,CAA4B,MAAM,CAAC,OAAnC,EAA4C,MAAM,CAAC,aAAnD,CAA5B;AACA,MAAM,UAAU,GAAG,CAAA,EAAA,GAAA,MAAM,CAAC,UAAP,MAAiB,IAAjB,IAAiB,EAAA,KAAA,KAAA,CAAjB,GAAiB,EAAjB,GAAqB,CAAxC;AACA,MAAM,MAAM,GAAG,CAAA,EAAA,GAAA,MAAM,CAAC,MAAP,MAAa,IAAb,IAAa,EAAA,KAAA,KAAA,CAAb,GAAa,EAAb,GAAiB,CAAhC;AAEA,MAAM,KAAK,GAAG,IAAI,IAAJ,EAAd;AACA,MAAM,SAAS,GAAG,IAAI,IAAJ,CAAS,KAAK,CAAC,OAAN,KAAkB,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAA5C,CAAlB;AACA,MAAM,gBAAgB,GAAG,IAAI,CAAC,KAAL,CAAW,SAAS,CAAC,OAAV,KAAsB,IAAjC,CAAzB;AACA,MAAM,SAAS,GAAG,CAAA,EAAA,GAAA,MAAM,CAAC,SAAP,MAAgB,IAAhB,IAAgB,EAAA,KAAA,KAAA,CAAhB,GAAgB,EAAhB,GAAoB,gBAAtC;AACA,MAAM,eAAe,GAAG,CAAA,EAAA,GAAA,MAAM,CAAC,eAAP,MAAsB,IAAtB,IAAsB,EAAA,KAAA,KAAA,CAAtB,GAAsB,EAAtB,GAA0B,MAAM,CAAC,KAAP,CAAa,CAAb,CAAlD;AAEA,MAAM,YAAY,GAAG,cAAA,CAAA,kBAAA,CAAiB;AACrC,IAAA,QAAQ,EAAR,QADqC;AAErC,IAAA,aAAa,EAAb,aAFqC;AAGrC,IAAA,mBAAmB,EAAnB,mBAHqC;AAIrC,IAAA,UAAU,EAAV,UAJqC;AAKrC,IAAA,MAAM,EAAN,MALqC;AAMrC,IAAA,SAAS,EAAT,SANqC;AAOrC,IAAA,eAAe,EAAf;AAPqC,GAAjB,CAArB;AAUA,MAAM,gBAAgB,GAAG,cAAA,CAAA,mBAAA,CAAoB;AAC5C,IAAA,YAAY,EAAE,YAD8B;AAE5C,IAAA,mBAAmB,EAAnB;AAF4C,GAApB,CAAzB;AAKA,SAAO;AACN,IAAA,YAAY,EAAZ,YADM;AAEN,IAAA,gBAAgB,EAAhB;AAFM,GAAP;AAIA,CAnCM;;AAAM,OAAA,CAAA,kBAAA,GAAkB,kBAAlB","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createGenesisBlock = void 0;\nconst lisk_genesis_1 = require(\"@liskhq/lisk-genesis\");\nconst utils_1 = require(\"./utils\");\nconst accounts_1 = require(\"./fixtures/accounts\");\nconst createGenesisBlock = (params) => {\n    var _a, _b, _c, _d, _e, _f;\n    const accounts = (_a = params.accounts) !== null && _a !== void 0 ? _a : accounts_1.defaultAccounts();\n    const initDelegates = (_b = params.initDelegates) !== null && _b !== void 0 ? _b : accounts_1.defaultAccounts().map(delegate => delegate.address);\n    const accountAssetSchemas = utils_1.getAccountSchemaFromModules(params.modules, params.genesisConfig);\n    const initRounds = (_c = params.initRounds) !== null && _c !== void 0 ? _c : 3;\n    const height = (_d = params.height) !== null && _d !== void 0 ? _d : 0;\n    const today = new Date();\n    const yesterday = new Date(today.getTime() - 1000 * 60 * 60 * 24);\n    const defaultTimestamp = Math.floor(yesterday.getTime() / 1000);\n    const timestamp = (_e = params.timestamp) !== null && _e !== void 0 ? _e : defaultTimestamp;\n    const previousBlockID = (_f = params.previousBlockID) !== null && _f !== void 0 ? _f : Buffer.alloc(0);\n    const genesisBlock = lisk_genesis_1.createGenesisBlock({\n        accounts,\n        initDelegates,\n        accountAssetSchemas,\n        initRounds,\n        height,\n        timestamp,\n        previousBlockID,\n    });\n    const genesisBlockJSON = lisk_genesis_1.getGenesisBlockJSON({\n        genesisBlock: genesisBlock,\n        accountAssetSchemas,\n    });\n    return {\n        genesisBlock,\n        genesisBlockJSON,\n    };\n};\nexports.createGenesisBlock = createGenesisBlock;\n//# sourceMappingURL=create_genesis_block.js.map"]},"metadata":{},"sourceType":"script"}