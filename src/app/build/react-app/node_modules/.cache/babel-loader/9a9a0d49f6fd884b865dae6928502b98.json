{"ast":null,"code":"var hasProp = Object.prototype.hasOwnProperty;\n\nfunction throwsMessage(err) {\n  return '[Throws: ' + (err ? err.message : '?') + ']';\n}\n\nfunction safeGetValueFromPropertyOnObject(obj, property) {\n  if (hasProp.call(obj, property)) {\n    try {\n      return obj[property];\n    } catch (err) {\n      return throwsMessage(err);\n    }\n  }\n\n  return obj[property];\n}\n\nfunction ensureProperties(obj) {\n  var seen = []; // store references to objects we have seen before\n\n  function visit(obj) {\n    if (obj === null || typeof obj !== 'object') {\n      return obj;\n    }\n\n    if (seen.indexOf(obj) !== -1) {\n      return '[Circular]';\n    }\n\n    seen.push(obj);\n\n    if (typeof obj.toJSON === 'function') {\n      try {\n        var fResult = visit(obj.toJSON());\n        seen.pop();\n        return fResult;\n      } catch (err) {\n        return throwsMessage(err);\n      }\n    }\n\n    if (Array.isArray(obj)) {\n      var aResult = obj.map(visit);\n      seen.pop();\n      return aResult;\n    }\n\n    var result = Object.keys(obj).reduce(function (result, prop) {\n      // prevent faulty defined getter properties\n      result[prop] = visit(safeGetValueFromPropertyOnObject(obj, prop));\n      return result;\n    }, {});\n    seen.pop();\n    return result;\n  }\n\n  ;\n  return visit(obj);\n}\n\nmodule.exports = function (data, replacer, space) {\n  return JSON.stringify(ensureProperties(data), replacer, space);\n};\n\nmodule.exports.ensureProperties = ensureProperties;","map":{"version":3,"sources":["/home/lisk/doomonlisk/node_modules/safe-json-stringify/index.js"],"names":["hasProp","Object","prototype","hasOwnProperty","throwsMessage","err","message","safeGetValueFromPropertyOnObject","obj","property","call","ensureProperties","seen","visit","indexOf","push","toJSON","fResult","pop","Array","isArray","aResult","map","result","keys","reduce","prop","module","exports","data","replacer","space","JSON","stringify"],"mappings":"AAAA,IAAIA,OAAO,GAAGC,MAAM,CAACC,SAAP,CAAiBC,cAA/B;;AAEA,SAASC,aAAT,CAAuBC,GAAvB,EAA4B;AAC3B,SAAO,eAAeA,GAAG,GAAGA,GAAG,CAACC,OAAP,GAAiB,GAAnC,IAA0C,GAAjD;AACA;;AAED,SAASC,gCAAT,CAA0CC,GAA1C,EAA+CC,QAA/C,EAAyD;AACxD,MAAIT,OAAO,CAACU,IAAR,CAAaF,GAAb,EAAkBC,QAAlB,CAAJ,EAAiC;AAChC,QAAI;AACH,aAAOD,GAAG,CAACC,QAAD,CAAV;AACA,KAFD,CAGA,OAAOJ,GAAP,EAAY;AACX,aAAOD,aAAa,CAACC,GAAD,CAApB;AACA;AACD;;AAED,SAAOG,GAAG,CAACC,QAAD,CAAV;AACA;;AAED,SAASE,gBAAT,CAA0BH,GAA1B,EAA+B;AAC9B,MAAII,IAAI,GAAG,EAAX,CAD8B,CACd;;AAEhB,WAASC,KAAT,CAAeL,GAAf,EAAoB;AACnB,QAAIA,GAAG,KAAK,IAAR,IAAgB,OAAOA,GAAP,KAAe,QAAnC,EAA6C;AAC5C,aAAOA,GAAP;AACA;;AAED,QAAII,IAAI,CAACE,OAAL,CAAaN,GAAb,MAAsB,CAAC,CAA3B,EAA8B;AAC7B,aAAO,YAAP;AACA;;AACDI,IAAAA,IAAI,CAACG,IAAL,CAAUP,GAAV;;AAEA,QAAI,OAAOA,GAAG,CAACQ,MAAX,KAAsB,UAA1B,EAAsC;AACrC,UAAI;AACH,YAAIC,OAAO,GAAGJ,KAAK,CAACL,GAAG,CAACQ,MAAJ,EAAD,CAAnB;AACAJ,QAAAA,IAAI,CAACM,GAAL;AACA,eAAOD,OAAP;AACA,OAJD,CAIE,OAAMZ,GAAN,EAAW;AACZ,eAAOD,aAAa,CAACC,GAAD,CAApB;AACA;AACD;;AAED,QAAIc,KAAK,CAACC,OAAN,CAAcZ,GAAd,CAAJ,EAAwB;AACvB,UAAIa,OAAO,GAAGb,GAAG,CAACc,GAAJ,CAAQT,KAAR,CAAd;AACAD,MAAAA,IAAI,CAACM,GAAL;AACA,aAAOG,OAAP;AACA;;AAED,QAAIE,MAAM,GAAGtB,MAAM,CAACuB,IAAP,CAAYhB,GAAZ,EAAiBiB,MAAjB,CAAwB,UAASF,MAAT,EAAiBG,IAAjB,EAAuB;AAC3D;AACAH,MAAAA,MAAM,CAACG,IAAD,CAAN,GAAeb,KAAK,CAACN,gCAAgC,CAACC,GAAD,EAAMkB,IAAN,CAAjC,CAApB;AACA,aAAOH,MAAP;AACA,KAJY,EAIV,EAJU,CAAb;AAKAX,IAAAA,IAAI,CAACM,GAAL;AACA,WAAOK,MAAP;AACA;;AAAA;AAED,SAAOV,KAAK,CAACL,GAAD,CAAZ;AACA;;AAEDmB,MAAM,CAACC,OAAP,GAAiB,UAASC,IAAT,EAAeC,QAAf,EAAyBC,KAAzB,EAAgC;AAChD,SAAOC,IAAI,CAACC,SAAL,CAAetB,gBAAgB,CAACkB,IAAD,CAA/B,EAAuCC,QAAvC,EAAiDC,KAAjD,CAAP;AACA,CAFD;;AAIAJ,MAAM,CAACC,OAAP,CAAejB,gBAAf,GAAkCA,gBAAlC","sourcesContent":["var hasProp = Object.prototype.hasOwnProperty;\n\nfunction throwsMessage(err) {\n\treturn '[Throws: ' + (err ? err.message : '?') + ']';\n}\n\nfunction safeGetValueFromPropertyOnObject(obj, property) {\n\tif (hasProp.call(obj, property)) {\n\t\ttry {\n\t\t\treturn obj[property];\n\t\t}\n\t\tcatch (err) {\n\t\t\treturn throwsMessage(err);\n\t\t}\n\t}\n\n\treturn obj[property];\n}\n\nfunction ensureProperties(obj) {\n\tvar seen = [ ]; // store references to objects we have seen before\n\n\tfunction visit(obj) {\n\t\tif (obj === null || typeof obj !== 'object') {\n\t\t\treturn obj;\n\t\t}\n\n\t\tif (seen.indexOf(obj) !== -1) {\n\t\t\treturn '[Circular]';\n\t\t}\n\t\tseen.push(obj);\n\n\t\tif (typeof obj.toJSON === 'function') {\n\t\t\ttry {\n\t\t\t\tvar fResult = visit(obj.toJSON());\n\t\t\t\tseen.pop();\n\t\t\t\treturn fResult;\n\t\t\t} catch(err) {\n\t\t\t\treturn throwsMessage(err);\n\t\t\t}\n\t\t}\n\n\t\tif (Array.isArray(obj)) {\n\t\t\tvar aResult = obj.map(visit);\n\t\t\tseen.pop();\n\t\t\treturn aResult;\n\t\t}\n\n\t\tvar result = Object.keys(obj).reduce(function(result, prop) {\n\t\t\t// prevent faulty defined getter properties\n\t\t\tresult[prop] = visit(safeGetValueFromPropertyOnObject(obj, prop));\n\t\t\treturn result;\n\t\t}, {});\n\t\tseen.pop();\n\t\treturn result;\n\t};\n\n\treturn visit(obj);\n}\n\nmodule.exports = function(data, replacer, space) {\n\treturn JSON.stringify(ensureProperties(data), replacer, space);\n}\n\nmodule.exports.ensureProperties = ensureProperties;\n"]},"metadata":{},"sourceType":"script"}