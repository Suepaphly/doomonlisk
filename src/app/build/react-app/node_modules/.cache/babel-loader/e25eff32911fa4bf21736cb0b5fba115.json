{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/home/lisk/doomonlisk/src/app/build/react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/home/lisk/doomonlisk/src/app/build/react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/home/lisk/doomonlisk/src/app/build/react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/home/lisk/doomonlisk/src/app/build/react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Scheduler = void 0;\n\nvar Scheduler = /*#__PURE__*/function () {\n  function Scheduler(job, interval) {\n    _classCallCheck(this, Scheduler);\n\n    this._active = false;\n    this._interval = interval;\n    this._job = job;\n  }\n\n  _createClass(Scheduler, [{\n    key: \"start\",\n    value: function () {\n      var _start = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (this._active) {\n                  _context.next = 3;\n                  break;\n                }\n\n                this._active = true;\n                return _context.abrupt(\"return\", this.run());\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function start() {\n        return _start.apply(this, arguments);\n      }\n\n      return start;\n    }()\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      if (this._active && this._id !== undefined) {\n        clearTimeout(this._id);\n        this._id = undefined;\n        this._active = false;\n      }\n    }\n  }, {\n    key: \"callJobAfterTimeout\",\n    value: function () {\n      var _callJobAfterTimeout = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var _this = this;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", new Promise(function (resolve) {\n                  _this._id = setTimeout( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            _context2.next = 2;\n                            return _this._job();\n\n                          case 2:\n                            resolve();\n\n                          case 3:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2);\n                  })), _this._interval);\n                }));\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function callJobAfterTimeout() {\n        return _callJobAfterTimeout.apply(this, arguments);\n      }\n\n      return callJobAfterTimeout;\n    }()\n  }, {\n    key: \"run\",\n    value: function () {\n      var _run = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!this._active) {\n                  _context4.next = 5;\n                  break;\n                }\n\n                _context4.next = 3;\n                return this.callJobAfterTimeout();\n\n              case 3:\n                _context4.next = 0;\n                break;\n\n              case 5:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function run() {\n        return _run.apply(this, arguments);\n      }\n\n      return run;\n    }()\n  }]);\n\n  return Scheduler;\n}();\n\nexports.Scheduler = Scheduler;","map":{"version":3,"sources":["../../src/job_handlers/scheduler.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;IAca,S;AAMZ,qBAAmB,GAAnB,EAA0C,QAA1C,EAA0D;AAAA;;AALlD,SAAA,OAAA,GAAU,KAAV;AAMP,SAAK,SAAL,GAAiB,QAAjB;AACA,SAAK,IAAL,GAAY,GAAZ;AACA;;;;;4EAGM;AAAA;AAAA;AAAA;AAAA;AAAA,oBACD,KAAK,OADJ;AAAA;AAAA;AAAA;;AAEL,qBAAK,OAAL,GAAe,IAAf;AAFK,iDAIE,KAAK,GAAL,EAJF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;WAQA,gBAAI;AACV,UAAI,KAAK,OAAL,IAAgB,KAAK,GAAL,KAAa,SAAjC,EAA4C;AAC3C,QAAA,YAAY,CAAC,KAAK,GAAN,CAAZ;AACA,aAAK,GAAL,GAAW,SAAX;AACA,aAAK,OAAL,GAAe,KAAf;AACA;AACD;;;;0FAEO;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,kDACA,IAAI,OAAJ,CAAkB,UAAA,OAAO,EAAG;AAElC,kBAAA,KAAI,CAAC,GAAL,GAAW,UAAU,wEAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCACf,KAAI,CAAC,IAAL,EADe;;AAAA;AAErB,4BAAA,OAAO;;AAFc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAD,IAGlB,KAAI,CAAC,SAHa,CAArB;AAIA,iBANM,CADA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;0EAUA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACA,KAAK,OADL;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAEA,KAAK,mBAAL,EAFA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;;;AAtCT,OAAA,CAAA,SAAA,GAAA,SAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Scheduler = void 0;\nclass Scheduler {\n    constructor(job, interval) {\n        this._active = false;\n        this._interval = interval;\n        this._job = job;\n    }\n    async start() {\n        if (!this._active) {\n            this._active = true;\n            return this.run();\n        }\n    }\n    stop() {\n        if (this._active && this._id !== undefined) {\n            clearTimeout(this._id);\n            this._id = undefined;\n            this._active = false;\n        }\n    }\n    async callJobAfterTimeout() {\n        return new Promise(resolve => {\n            this._id = setTimeout(async () => {\n                await this._job();\n                resolve();\n            }, this._interval);\n        });\n    }\n    async run() {\n        while (this._active) {\n            await this.callJobAfterTimeout();\n        }\n    }\n}\nexports.Scheduler = Scheduler;\n//# sourceMappingURL=scheduler.js.map"]},"metadata":{},"sourceType":"script"}