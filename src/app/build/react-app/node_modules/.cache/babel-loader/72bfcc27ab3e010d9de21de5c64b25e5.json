{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.calculateDefaultReward = exports.calculateMilestone = void 0;\n\nvar calculateMilestone = function calculateMilestone(height, blockRewardArgs) {\n  var distance = Math.floor(blockRewardArgs.distance);\n  var location = Math.trunc((height - blockRewardArgs.rewardOffset) / distance);\n  var lastMile = blockRewardArgs.milestones[blockRewardArgs.milestones.length - 1];\n\n  if (location > blockRewardArgs.milestones.length - 1) {\n    return blockRewardArgs.milestones.lastIndexOf(lastMile);\n  }\n\n  return location;\n};\n\nexports.calculateMilestone = calculateMilestone;\n\nvar calculateDefaultReward = function calculateDefaultReward(height, blockRewardArgs) {\n  if (height < blockRewardArgs.rewardOffset) {\n    return BigInt(0);\n  }\n\n  return blockRewardArgs.milestones[exports.calculateMilestone(height, blockRewardArgs)];\n};\n\nexports.calculateDefaultReward = calculateDefaultReward;","map":{"version":3,"sources":["../src/block_reward.ts"],"names":[],"mappings":";;;;;;;AAeO,IAAM,kBAAkB,GAAG,SAArB,kBAAqB,CAAC,MAAD,EAAiB,eAAjB,EAAgE;AACjG,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAL,CAAW,eAAe,CAAC,QAA3B,CAAjB;AAEA,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAL,CAAW,CAAC,MAAM,GAAG,eAAe,CAAC,YAA1B,IAA0C,QAArD,CAAjB;AACA,MAAM,QAAQ,GAAG,eAAe,CAAC,UAAhB,CAA2B,eAAe,CAAC,UAAhB,CAA2B,MAA3B,GAAoC,CAA/D,CAAjB;;AAEA,MAAI,QAAQ,GAAG,eAAe,CAAC,UAAhB,CAA2B,MAA3B,GAAoC,CAAnD,EAAsD;AACrD,WAAO,eAAe,CAAC,UAAhB,CAA2B,WAA3B,CAAuC,QAAvC,CAAP;AACA;;AAED,SAAO,QAAP;AACA,CAXM;;AAAM,OAAA,CAAA,kBAAA,GAAkB,kBAAlB;;AAaN,IAAM,sBAAsB,GAAG,SAAzB,sBAAyB,CACrC,MADqC,EAErC,eAFqC,EAG1B;AACX,MAAI,MAAM,GAAG,eAAe,CAAC,YAA7B,EAA2C;AAC1C,WAAO,MAAM,CAAC,CAAD,CAAb;AACA;;AAED,SAAO,eAAe,CAAC,UAAhB,CAA2B,OAAA,CAAA,kBAAA,CAAmB,MAAnB,EAA2B,eAA3B,CAA3B,CAAP;AACA,CATM;;AAAM,OAAA,CAAA,sBAAA,GAAsB,sBAAtB","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.calculateDefaultReward = exports.calculateMilestone = void 0;\nconst calculateMilestone = (height, blockRewardArgs) => {\n    const distance = Math.floor(blockRewardArgs.distance);\n    const location = Math.trunc((height - blockRewardArgs.rewardOffset) / distance);\n    const lastMile = blockRewardArgs.milestones[blockRewardArgs.milestones.length - 1];\n    if (location > blockRewardArgs.milestones.length - 1) {\n        return blockRewardArgs.milestones.lastIndexOf(lastMile);\n    }\n    return location;\n};\nexports.calculateMilestone = calculateMilestone;\nconst calculateDefaultReward = (height, blockRewardArgs) => {\n    if (height < blockRewardArgs.rewardOffset) {\n        return BigInt(0);\n    }\n    return blockRewardArgs.milestones[exports.calculateMilestone(height, blockRewardArgs)];\n};\nexports.calculateDefaultReward = calculateDefaultReward;\n//# sourceMappingURL=block_reward.js.map"]},"metadata":{},"sourceType":"script"}